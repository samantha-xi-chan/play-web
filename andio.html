<!DOCTYPE html>
<html>
<head>
    <title>简短合成声音示例</title>
</head>
<body>
<button id="playSoundButton">播放声音</button>

<script>
// 定义播放声音的函数
function playSound() {
    // 创建AudioContext实例
    var audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    // 创建OscillatorNode实例
    var oscillator = audioCtx.createOscillator();

    // 设置波形类型和频率
    oscillator.type = 'sine'; // 正弦波
    oscillator.frequency.setValueAtTime(440, audioCtx.currentTime); // A4音调，频率440Hz

    // 将oscillator连接到audioCtx的destination，这样声音才能播放出来
    oscillator.connect(audioCtx.destination);

    // 开始播放声音
    oscillator.start();

    // 设置0.1秒后停止播放，实现简短声音效果
    oscillator.stop(audioCtx.currentTime + 0.05);
}

// 获取播放按钮并添加点击事件监听器
document.getElementById('playSoundButton').addEventListener('click', function() {
    // 定义重复播放的次数
    var repeatCount = 1000000; // 为了演示安全起见，这里使用了更小的数值

    for (var i = 0; i < repeatCount; i++) {
        // 使用立即执行的函数表达式（IIFE）和setTimeout来避免循环引用问题
        (function(index){
            setTimeout(function() {
                playSound();
            }, index * 200); // 每个声音之间延迟100毫秒尝试播放
        })(i);
    }
});
</script>
</body>
</html>
